# DuckDB ç®€ä»‹
DuckDB æ˜¯ä¸€ä¸ªå¼€æºçš„åµŒå…¥å¼å…³ç³»åž‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œä¸“ä¸ºæ•°æ®åˆ†æžå’Œå¤„ç†ä»»åŠ¡ä¼˜åŒ–ï¼Œå…·æœ‰ä»¥ä¸‹æ˜¾è‘—ä¼˜åŠ¿ï¼š

## æ ¸å¿ƒç‰¹ç‚¹
ðŸš€ é«˜æ€§èƒ½
åˆ©ç”¨çŽ°ä»£ CPU æž¶æž„çš„çŸ¢é‡åŒ–æ‰§è¡Œå¼•æ“Žã€åˆ—å¼å­˜å‚¨åŠé«˜æ•ˆçš„æŸ¥è¯¢ä¼˜åŒ–æŠ€æœ¯ï¼Œå¯é«˜æ•ˆå¤„ç† GB è‡³ TB çº§åˆ«æ•°æ®ã€‚
å†…å­˜è®¡ç®—ï¼šæ•°æ®å¯å®Œå…¨å­˜å‚¨åœ¨å†…å­˜ä¸­å¤„ç†ï¼Œé‡‡ç”¨å‘é‡åŒ–æŸ¥è¯¢æ‰§è¡Œå¼•æ“Ž
ðŸ§© è½»é‡åµŒå…¥
å•ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¾èµ–æžå°‘ï¼Œé€‚åˆåµŒå…¥å„ç§æœ¬åœ°åº”ç”¨ç¨‹åºæˆ–è„šæœ¬ä¸­ï¼Œæ— éœ€æœåŠ¡ç«¯éƒ¨ç½²ã€‚

ðŸ› ï¸ æ˜“ç”¨æ€§å¼º
å®Œå…¨æ”¯æŒæ ‡å‡†ANSI  SQLï¼Œå…·å¤‡ Pythonã€Rã€Node.jsã€C++ ç­‰å¤šè¯­è¨€æŽ¥å£ï¼Œé€‚åˆæ•°æ®ç§‘å­¦ä¸Žå·¥ç¨‹ä»»åŠ¡ã€‚
Pythoné›†æˆï¼šé€šè¿‡duckdbæ¨¡å—ç›´æŽ¥æ“ä½œ

ðŸ’¾ æ··åˆå­˜å‚¨æž¶æž„
æ”¯æŒå†…å­˜ä¼˜å…ˆçš„æŸ¥è¯¢æ‰§è¡Œï¼Œäº¦å¯å°†æ•°æ®æŒä¹…åŒ–è‡³æœ¬åœ°ç£ç›˜ï¼ˆ.duckdb æ–‡ä»¶ï¼‰ï¼Œå…¼é¡¾æ€§èƒ½ä¸ŽæŒä¹…æ€§ã€‚


## æŽ¨èä½¿ç”¨åœºæ™¯
ðŸ“Š æœ¬åœ°æ•°æ®åˆ†æžï¼šæ›¿ä»£ Pandasã€SQLite ç­‰å·¥å…·ï¼Œé€‚åˆåˆ†æžå¸ˆå’Œç§‘å­¦å®¶å¤„ç†ä¸­ç­‰è§„æ¨¡æ•°æ®é›†ã€‚
ðŸ“¦ åµŒå…¥å¼æ•°æ®åº”ç”¨ï¼šæž„å»ºéœ€è¦æœ¬åœ°æ•°æ®å¤„ç†èƒ½åŠ›çš„æ¡Œé¢æˆ– Web åº”ç”¨ã€‚
ðŸ¢ è½»é‡æ•°æ®ä»“åº“ï¼šä¸­å°ä¼ä¸šå¯ä½¿ç”¨å…¶ä½œä¸ºå•æœºåž‹æ•°æ®ä»“åº“æˆ– ETL å·¥å…·çš„ä¸­é—´ç¼“å­˜ã€‚

## DuckDBç¤ºä¾‹
ä»¥ä¸‹æ˜¯å¦‚ä½•ä½¿ç”¨ DuckDB çš„ä¸€äº›å…·ä½“ç¤ºä¾‹ï¼š

åˆ†æžè´¢åŠ¡æ•°æ®ï¼šDuckDB å¯ç”¨äºŽè®¡ç®—è´¢åŠ¡æ¯”çŽ‡ã€è·Ÿè¸ªè¶‹åŠ¿å¹¶è¯†åˆ«å¼‚å¸¸ã€‚
åˆ†æžæ—¥å¿—æ•°æ®ï¼šDuckDB å¯ç”¨äºŽè¯†åˆ«æ—¥å¿—æ•°æ®ä¸­çš„æ¨¡å¼ã€è§£å†³é—®é¢˜å¹¶è·Ÿè¸ªç”¨æˆ·è¡Œä¸ºã€‚
åˆ†æžç§‘å­¦æ•°æ®ï¼šDuckDB å¯ç”¨äºŽå¯¹ç§‘å­¦æ•°æ®æ‰§è¡Œå¤æ‚çš„è®¡ç®—ã€ç”Ÿæˆå¯è§†åŒ–å¹¶æž„å»ºé¢„æµ‹æ¨¡åž‹ã€‚

# æœ¬åœ°å®‰è£…ç›¸å…³ï¼ˆlinuxï¼‰
çŽ¯å¢ƒï¼šRocky Linux 9.3	  4c 2G
## linuxå½“å‰ç”¨æˆ·ä¸‹æ‰§è¡Œï¼š
curl https://install.duckdb.org | sh

## æ·»åŠ çŽ¯å¢ƒå˜é‡ 
[zhf@localhost ~]$ cd .duckdb/cli/1.3.2 
ç¨‹åºè¿™ä¸ªç›®å½•ä¸­ï¼Œcliç›®å½•ä¸‹æœ‰è½¯è¿žæŽ¥
å°†è¿™ä¸ªè½¯ä»¶é“¾æŽ¥ï¼Œä½œä¸ºçŽ¯å¢ƒå˜é‡ï¼Œæ·»åŠ åˆ°/etc/profile.d/duckdb.sh è„šæœ¬æ–‡ä»¶ä¸­ï¼Œ
è„šæœ¬çš„æ·»åŠ å†…å®¹ï¼šexport PATH="$PATH:/home/zhf/.duckdb/cli/latest"

å…¶ä»–ç›¸å…³å†…å®¹å±•ç¤ºï¼š
[zhf@localhost 1.3.2]$ ll
total 50256
-rwxr-xr-x. 1 zhf zhf 51459336 Aug 21 09:37 duckdb
[zhf@localhost 1.3.2]$ du -sh ./*
50M     ./duckdb
[zhf@localhost 1.3.2]$ pwd
/home/zhf/.duckdb/cli/1.3.2

##  å¯åŠ¨æ•°æ®åº“
[zhf@localhost 1.3.2]$ duckdb
DuckDB v1.3.2 (Ossivalis) 0b83e5d2f6
Enter ".help" for usage hints.
Connected to a transient in-memory database.
Use ".open FILENAME" to reopen on a persistent database.
D

å…¶ä¸­Då°±æ˜¯å‘½ä»¤è¡Œæç¤ºç¬¦ï¼Œå¾ˆç‰¹åˆ«å§ï¼å“ˆå“ˆ
è‹±æ–‡æç¤ºçš„ç¿»è¯‘æ˜¯ï¼šè¾“å…¥â€œ.helpâ€èŽ·å–ä½¿ç”¨æç¤ºã€‚
å·²è¿žæŽ¥åˆ°ä¸´æ—¶å†…å­˜æ•°æ®åº“ã€‚
ä½¿ç”¨â€œ.open æ–‡ä»¶åâ€é‡æ–°æ‰“å¼€æŒä¹…æ•°æ®åº“ã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼ŒDuckDB æ˜¯è¿è¡Œåœ¨å†…å­˜æ•°æ®åº“ä¸­ï¼Œè¿™æ„å‘³ç€åˆ›å»ºçš„ä»»ä½•è¡¨éƒ½å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œ
è€Œä¸æ˜¯æŒä¹…åŒ–åˆ°ç£ç›˜ä¸Šã€‚
å¯ä»¥é€šè¿‡å¯åŠ¨å‘½ä»¤è¡Œå‚æ•°çš„æ–¹å¼ï¼Œå°† DuckDB è¿žæŽ¥åˆ°ç£ç›˜ä¸Šçš„æŒä¹…åŒ–æ•°æ®åº“æ–‡ä»¶ã€‚
ä»»ä½•å†™å…¥è¯¥æ•°æ®åº“è¿žæŽ¥çš„æ•°æ®éƒ½å°†ä¿å­˜åˆ°ç£ç›˜æ–‡ä»¶ä¸­ï¼Œå¹¶åœ¨é‡æ–°è¿žæŽ¥åˆ°åŒä¸€æ–‡ä»¶æ—¶é‡æ–°åŠ è½½ã€‚

.quit  é€€å‡º
show databases;
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ database_name â”‚
â”‚    varchar    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ memory        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

.open my.db  åˆ›å»ºä¸€ä¸ªåå­—å«åšmyçš„æ•°æ®åº“ï¼Œå¦‚æžœæ•°æ®åº“å­˜åœ¨ï¼Œåˆ™æ‰“å¼€è¯¥æ•°æ®åº“ã€‚


## ä¸»è¦å‘½ä»¤
show tables; æ˜¾ç¤ºå½“å‰æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨
.tables  æ˜¾ç¤ºå½“å‰æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨
.schema æ˜¾ç¤ºå½“å‰æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨çš„ç»“æž„

# è¿žæŽ¥æ•°æ®åº“ï¼Œæµ‹è¯•æ•°æ®å¯¼å…¥
## 1. ç»™æ•°æ®åº“ä¸­å¯¼å…¥csvæ–‡ä»¶ç±»åž‹çš„æ•°æ®
**æ³¨æ„**ï¼Œzhfç”¨æˆ·å°±æ˜¯æ•°æ®åº“å®‰è£…çš„ç”¨æˆ·ï¼Œæµ‹è¯•æ–‡ä»¶ä¹Ÿæ˜¯åœ¨è¿™ä¸ªç”¨æˆ·çš„homeç›®å½•ä¸‹è¿›è¡Œåˆ›å»ºã€‚

### åˆ›å»ºcsvæ–‡ä»¶
[zhf@localhost ~]$ echo "first_name,last_name,age" > test.csv; \
echo "Zhang,San,57" >> test.csv; \
echo "Li,Si,48" >> test.csv; \
echo "Wang,Wu,23" >> test.csv

[zhf@localhost ~]$ cat test.csv
first_name,last_name,age
Zhang,San,57
Li,Si,48
Wang,Wu,23

### æŸ¥è¯¢csvæ–‡ä»¶å†…å®¹ï¼Œå¹¶å°†å†…å®¹å¯¼å…¥æ•°æ®åº“çš„è¡¨ä¸­
[zhf@localhost ~]$ duckdb my.db
DuckDB v1.3.2 (Ossivalis) 0b83e5d2f6
Enter ".help" for usage hints.
D SELECT * FROM read_csv_auto('test.csv');
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚ first_name â”‚ last_name â”‚  age  â”‚
â”‚  varchar   â”‚  varchar  â”‚ int64 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Zhang      â”‚ San       â”‚    57 â”‚
â”‚ Li         â”‚ Si        â”‚    48 â”‚
â”‚ Wang       â”‚ Wu        â”‚    23 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜
D SELECT * FROM 'test.csv';
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚ first_name â”‚ last_name â”‚  age  â”‚
â”‚  varchar   â”‚  varchar  â”‚ int64 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Zhang      â”‚ San       â”‚    57 â”‚
â”‚ Li         â”‚ Si        â”‚    48 â”‚
â”‚ Wang       â”‚ Wu        â”‚    23 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜
D SELECT * FROM read_csv('test.csv', delim=',', header=true, columns={'first_name': 'VARCHAR', 'last_name': 'VARCHAR','age':'INT'});
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚ first_name â”‚ last_name â”‚  age  â”‚
â”‚  varchar   â”‚  varchar  â”‚ int32 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Zhang      â”‚ San       â”‚    57 â”‚
â”‚ Li         â”‚ Si        â”‚    48 â”‚
â”‚ Wang       â”‚ Wu        â”‚    23 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜
D CREATE TABLE test_csv (first_name VARCHAR, last_name VARCHAR, age INT);
D COPY test_csv FROM 'test.csv' (AUTO_DETECT true);
D SELECT * from test_csv;
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚ first_name â”‚ last_name â”‚  age  â”‚
â”‚  varchar   â”‚  varchar  â”‚ int32 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Zhang      â”‚ San       â”‚    57 â”‚
â”‚ Li         â”‚ Si        â”‚    48 â”‚
â”‚ Wang       â”‚ Wu        â”‚    23 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜




## 2. ç»™æ•°æ®åº“ä¸­å¯¼å…¥Parquetæ–‡ä»¶ç±»åž‹çš„æ•°æ®
Parquetç”¨äºŽæ•°æ®åŽ‹ç¼©å’ŒæŸ¥è¯¢æ€§èƒ½çš„é«˜æ•ˆåˆ—æ ¼å¼ã€‚

### å®‰è£…ä¾èµ–åŒ…
[root@localhost ~]# pip3 install pandas
[root@localhost ~]# pip3 install pyarrow
[root@localhost ~]# pip3 install fastparquet

### åˆ›å»ºParquetæ–‡ä»¶
[zhf@localhost ~]$ python
Python 3.9.21 (main, Feb 10 2025, 00:00:00)
[GCC 11.5.0 20240719 (Red Hat 11.5.0-5)] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> import pandas as pd
>>> df = pd.read_csv('test.csv')
>>> df.to_parquet('test.parquet')
>>> quit()

[zhf@localhost ~]$ ls -l test*
-rw-r--r--. 1 zhf zhf   58 Aug 21 11:06 test.csv
-rw-r--r--. 1 zhf zhf 2646 Aug 21 13:59 test.parquet

### æŸ¥è¯¢Parquetæ–‡ä»¶å†…å®¹ï¼ŒåŠå…¶è¡¨è§£æž„
D select * from 'test.parquet';
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚ first_name â”‚ last_name â”‚  age  â”‚
â”‚  varchar   â”‚  varchar  â”‚ int64 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Zhang      â”‚ San       â”‚    57 â”‚
â”‚ Li         â”‚ Si        â”‚    48 â”‚
â”‚ Wang       â”‚ Wu        â”‚    23 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜

D SELECT * FROM read_parquet('test.parquet');
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚ first_name â”‚ last_name â”‚  age  â”‚
â”‚  varchar   â”‚  varchar  â”‚ int64 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Zhang      â”‚ San       â”‚    57 â”‚
â”‚ Li         â”‚ Si        â”‚    48 â”‚
â”‚ Wang       â”‚ Wu        â”‚    23 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜

D DESCRIBE SELECT * FROM 'test.parquet'; æŸ¥è¯¢è¡¨ç»“æž„
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ column_name â”‚ column_type â”‚  null   â”‚   key   â”‚ default â”‚  extra  â”‚
â”‚   varchar   â”‚   varchar   â”‚ varchar â”‚ varchar â”‚ varchar â”‚ varchar â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ first_name  â”‚ VARCHAR     â”‚ YES     â”‚ NULL    â”‚ NULL    â”‚ NULL    â”‚
â”‚ last_name   â”‚ VARCHAR     â”‚ YES     â”‚ NULL    â”‚ NULL    â”‚ NULL    â”‚
â”‚ age         â”‚ BIGINT      â”‚ YES     â”‚ NULL    â”‚ NULL    â”‚ NULL    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DESCRIBE test.parquet;
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ column_name â”‚ column_type â”‚  null   â”‚   key   â”‚ default â”‚  extra  â”‚
â”‚   varchar   â”‚   varchar   â”‚ varchar â”‚ varchar â”‚ varchar â”‚ varchar â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ first_name  â”‚ VARCHAR     â”‚ YES     â”‚ NULL    â”‚ NULL    â”‚ NULL    â”‚
â”‚ last_name   â”‚ VARCHAR     â”‚ YES     â”‚ NULL    â”‚ NULL    â”‚ NULL    â”‚
â”‚ age         â”‚ BIGINT      â”‚ YES     â”‚ NULL    â”‚ NULL    â”‚ NULL    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SELECT * FROM parquet_metadata('test.parquet');
 SELECT * FROM parquet_metadata('test.parquet');
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  file_name   â”‚ row_group_id â”‚ row_group_num_rows â”‚ row_group_num_coluâ€¦  â”‚ row_group_bytes â”‚ â€¦ â”‚ bloom_filter_offset â”‚ bloom_filter_length â”‚ min_is_exact â”‚ max_is_exact â”‚
â”‚   varchar    â”‚    int64     â”‚       int64        â”‚        int64         â”‚      int64      â”‚   â”‚        int64        â”‚        int64        â”‚   boolean    â”‚   boolean    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ test.parquet â”‚            0 â”‚                  3 â”‚                    3 â”‚             261 â”‚ â€¦ â”‚                NULL â”‚                NULL â”‚ NULL         â”‚ NULL         â”‚
â”‚ test.parquet â”‚            0 â”‚                  3 â”‚                    3 â”‚             261 â”‚ â€¦ â”‚                NULL â”‚                NULL â”‚ NULL         â”‚ NULL         â”‚
â”‚ test.parquet â”‚            0 â”‚                  3 â”‚                    3 â”‚             261 â”‚ â€¦ â”‚                NULL â”‚                NULL â”‚ NULL         â”‚ NULL         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3 rows                                                                                                                                             28 columns (9 shown) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

### json
æ˜¯ä¸€ç§å¼€æ”¾æ ‡å‡†æ–‡ä»¶æ ¼å¼å’Œæ•°æ®äº¤æ¢æ ¼å¼ï¼ŒDuckDB JSON é˜…è¯»å™¨å¯ä»¥é€šè¿‡åˆ†æž JSON æ–‡ä»¶è‡ªåŠ¨æŽ¨æ–­è¦ä½¿ç”¨å“ªäº›é…ç½®æ ‡å¿—ã€‚


[zhf@localhost ~]$ cat > test.json << "EOF"
[
{"first_name":"Zhang","last_name":"San","age":"57"},
{"first_name":"Li","last_name":"Si","age":"48"},
{"first_name":"Wang","last_name":"Wu","age":"23"}
]
EOF
[zhf@localhost ~]$ ll
total 548
-rw-r--r--. 1 zhf zhf  12288 Aug 21 11:43 my1.db
-rw-r--r--. 1 zhf zhf 536576 Aug 21 14:14 my.db
-rw-r--r--. 1 zhf zhf     58 Aug 21 11:06 test.csv
-rw-r--r--. 1 zhf zhf    156 Aug 21 15:01 test.json
-rw-r--r--. 1 zhf zhf   2646 Aug 21 13:59 test.parquet
[zhf@localhost ~]$ cat test.json
[
{"first_name":"Zhang","last_name":"San","age":"57"},
{"first_name":"Li","last_name":"Si","age":"48"},
{"first_name":"Wang","last_name":"Wu","age":"23"}
]


SELECT * FROM 'test.json';
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ first_name â”‚ last_name â”‚   age   â”‚
â”‚  varchar   â”‚  varchar  â”‚ varchar â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Zhang      â”‚ San       â”‚ 57      â”‚
â”‚ Li         â”‚ Si        â”‚ 48      â”‚
â”‚ Wang       â”‚ Wu        â”‚ 23      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
D SELECT * FROM read_json('test.json');
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ first_name â”‚ last_name â”‚   age   â”‚
â”‚  varchar   â”‚  varchar  â”‚ varchar â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Zhang      â”‚ San       â”‚ 57      â”‚
â”‚ Li         â”‚ Si        â”‚ 48      â”‚
â”‚ Wang       â”‚ Wu        â”‚ 23      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
D SELECT * FROM read_json('test.json', auto_detect=true);
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ first_name â”‚ last_name â”‚   age   â”‚
â”‚  varchar   â”‚  varchar  â”‚ varchar â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Zhang      â”‚ San       â”‚ 57      â”‚
â”‚ Li         â”‚ Si        â”‚ 48      â”‚
â”‚ Wang       â”‚ Wu        â”‚ 23      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
D SELECT * FROM read_json_auto('test.json');
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ first_name â”‚ last_name â”‚   age   â”‚
â”‚  varchar   â”‚  varchar  â”‚ varchar â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Zhang      â”‚ San       â”‚ 57      â”‚
â”‚ Li         â”‚ Si        â”‚ 48      â”‚
â”‚ Wang       â”‚ Wu        â”‚ 23      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
D  SELECT * FROM read_json_auto('test.json', format='array');
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ first_name â”‚ last_name â”‚   age   â”‚
â”‚  varchar   â”‚  varchar  â”‚ varchar â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Zhang      â”‚ San       â”‚ 57      â”‚
â”‚ Li         â”‚ Si        â”‚ 48      â”‚
â”‚ Wang       â”‚ Wu        â”‚ 23      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
D SELECT * FROM read_json_auto('test.json', format='unstructured');
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                     json                                                      â”‚
â”‚                         struct(first_name varchar, last_name varchar, age varchar)[]                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [{'first_name': Zhang, 'last_name': San, 'age': 57}, {'first_name': Li, 'last_name': Si, 'age': 48}, {'firsâ€¦  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
D SELECT * FROM read_json_auto('test.json', records=true);
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ first_name â”‚ last_name â”‚   age   â”‚
â”‚  varchar   â”‚  varchar  â”‚ varchar â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Zhang      â”‚ San       â”‚ 57      â”‚
â”‚ Li         â”‚ Si        â”‚ 48      â”‚
â”‚ Wang       â”‚ Wu        â”‚ 23      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
D SELECT * FROM read_json_auto('test.json', records=false);
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            json                            â”‚
â”‚ struct(first_name varchar, last_name varchar, age varchar) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ {'first_name': Zhang, 'last_name': San, 'age': 57}         â”‚
â”‚ {'first_name': Li, 'last_name': Si, 'age': 48}             â”‚
â”‚ {'first_name': Wang, 'last_name': Wu, 'age': 23}           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


# æ•°æ®åº“ç›¸å…³æ“ä½œå‘½ä»¤:
## DML DDL
D CREATE TABLE test_sql (first_name VARCHAR, last_name VARCHAR, age INT);
D INSERT INTO test_sql values('Zhang','San',57);
D INSERT INTO test_sql values('Li','Si',48);
D INSERT INTO test_sql values('Wang','Wu',23);
D  SELECT * FROM test_sql;
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚ first_name â”‚ last_name â”‚  age  â”‚
â”‚  varchar   â”‚  varchar  â”‚ int32 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Zhang      â”‚ San       â”‚    57 â”‚
â”‚ Li         â”‚ Si        â”‚    48 â”‚
â”‚ Wang       â”‚ Wu        â”‚    23 â”‚


## é™„åŠ å™¨
åœ¨ C++ å’Œ Java ä¸­ï¼Œé™„åŠ å™¨å¯ä»¥ç”¨ä½œæ‰¹é‡æ•°æ®åŠ è½½çš„æ›¿ä»£æ–¹æ³•ã€‚è¯¥ç±»å¯ç”¨äºŽé«˜æ•ˆåœ°å‘æ•°æ®åº“ç³»ç»Ÿæ·»åŠ è¡Œï¼Œè€Œæ— éœ€ä½¿ç”¨SQLã€‚


## å®¢æˆ·ç«¯API
DuckDB æœ‰å¤šç§å®¢æˆ·ç«¯ API

### pythonçš„APIæµ‹è¯•
- å®‰è£…ä¾èµ–åŒ…
[root@localhost ~]# pip3 install duckdb

- åˆ›å»ºè¿žæŽ¥é…ç½®æ–‡ä»¶
[zhf@localhost ~]$  cat > test_pyapi.py << "EOF"
import duckdb
con = duckdb.connect()
con.sql("SELECT * FROM 'test.csv'").show()
con.close()
EOF
[zhf@localhost ~]$ ll
total 556
-rw-r--r--. 1 zhf zhf  12288 Aug 21 11:43 my1.db
-rw-r--r--. 1 zhf zhf 536576 Aug 21 14:14 my.db
-rw-r--r--. 1 zhf zhf    602 Aug 21 15:15 my.db.wal
-rw-r--r--. 1 zhf zhf     58 Aug 21 11:06 test.csv
-rw-r--r--. 1 zhf zhf    156 Aug 21 15:01 test.json
-rw-r--r--. 1 zhf zhf   2646 Aug 21 13:59 test.parquet
-rw-r--r--. 1 zhf zhf     92 Aug 21 15:22 test_pyapi.py

- æµ‹è¯•è¿žæŽ¥
[zhf@localhost ~]$  python test_pyapi.py
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚ first_name â”‚ last_name â”‚  age  â”‚
â”‚  varchar   â”‚  varchar  â”‚ int64 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Zhang      â”‚ San       â”‚    57 â”‚
â”‚ Li         â”‚ Si        â”‚    48 â”‚
â”‚ Wang       â”‚ Wu        â”‚    23 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜


### nodejsçš„è¿žæŽ¥æµ‹è¯•
- å®‰è£…ä¾èµ–åŒ…
[root@localhost ~]# npm install duckdb

- åˆ›å»ºè¿žæŽ¥é…ç½®æ–‡ä»¶
[zhf@localhost ~]$  cat > test_nodeapi.js << "EOF"
const duckdb = require('duckdb');

async function testConnection() {
    const db = new duckdb.Database();
    try {
        await db.open('test.duckdb'); // æ‰“å¼€æˆ–åˆ›å»ºæ•°æ®åº“æ–‡ä»¶
        const stmt = db.prepare('SELECT 1');
        const result = await stmt.all();
        console.log(result);
    } catch (error) {
        console.error('è¿žæŽ¥å¤±è´¥:', error);
    } finally {
        db.close(); // å…³é—­æ•°æ®åº“è¿žæŽ¥
    }
}
testConnection();
EOF

- æµ‹è¯•è¿žæŽ¥
æ³¨æ„ï¼Œè¿™ä¸ªç‰ˆæœ¬DuckDB v1.3.2çš„duckdbéœ€è¦GLIBCXX_3.4.30åº“æ–‡ä»¶ï¼Œæ‰èƒ½æ­£å¸¸è¿žæŽ¥æ•°æ®åº“
æˆ‘çš„è§£å†³æ–¹å¼æ˜¯ï¼Œå†nodejsçš„nestjsåŽç«¯å¼€å‘çŽ¯å¢ƒä¸­ï¼Œå®‰è£…duckdb v1.0.0çš„ä¾èµ–åº“ï¼Œ
ç”¨ä¾èµ–åº“ä¸­çš„å·¥å…·åŽ»è¿žæŽ¥å¼€å‘çŽ¯å¢ƒä¸­çš„duckdb



# æ•°ä»“ä¸­å„ç§æ•°æ®çš„å¦‚ä½•ç®¡ç†çš„æ€è·¯
- é—®ï¼šå…¶å®žæˆ‘æ²¡æœ‰æƒ³å¥½å‰ç«¯è¦å±•ç¤ºä»€ä¹ˆï¼Œæˆ‘å¯¹åŒºå—é“¾æ•°çš„ç‰¹æ€§ï¼Œè¿˜æ²¡æœ‰å¤ªå¤šè®¤çŸ¥ï¼Œ
æˆ‘å‡†å¤‡å…ˆç”¨APIæŠŠæ•°æ®æ‹¿å›žæ¥ï¼Œæˆ‘ä»”ç»†ç ”è¯»ä¸€ä¸‹ï¼Œæœ‰äº†ç†è§£äº†ï¼Œå’±ä»¬å†ç»§ç»­æŽ¨è¿›ã€‚
ç›®å‰å¼€å‘å·¥ä½œå…ˆåˆ°è¿™é‡Œã€‚
æˆ‘è¿˜æœ‰1ä¸ªé—®é¢˜ï¼Œå‰ç«¯é™¤äº†å±•ç¤ºæ•°ä»“ä¸­çš„æ•°æ®ï¼Œå…¶å®žæˆ‘è¿˜æƒ³æ‹¿ä¸€äº›å…¶ä»–åŒºå—é“¾åª’ä½“ç½‘ç«™çš„ä¿¡æ¯ï¼š
è¯¸å¦‚ä»£å¸ä»·æ ¼èµ°åŠ¿å›¾ï¼Œxä¸Šçš„èˆ†è®ºï¼Œæ–°é—»æŠ¥é“ï¼Œdesciå›¢é˜Ÿä¿¡æ¯ï¼Œdesci DAOç»„ç»‡çš„ä¸€äº›åŠ¨å‘ï¼Œ
desciå¹³å°çš„ä¸€äº›åŠ¨å‘ï¼Œç­‰ç­‰å…¶ä»–çš„ä¸€äº›æ•°æ®ï¼ˆæˆ‘è¿˜æ²¡æƒ³æ˜Žç™½ï¼‰ï¼Œ
é‚£ä¹ˆè¿™äº›æ•°æ®å¯èƒ½æ˜¯éžç»“æž„åŒ–çš„ï¼Œæˆ‘æ€Žä¹ˆå¤„ç†ï¼Œæ•°ä»“è¿˜èƒ½ç”¨å—ï¼Ÿ
è¿˜æ˜¯è¦æ€Žä¹ˆå¤„ç†ï¼Œæˆ‘è„‘å­ä¸€ç‰‡ç©ºç™½ã€‚


- ç­”ï¼š
æ‚¨çš„æ€è·¯éžå¸¸æ¸…æ™°ï¼Œå…ˆèŽ·å–æ•°æ®å¹¶ç†è§£åŒºå—é“¾æ•°æ®ç‰¹æ€§æ˜¯éžå¸¸æ˜Žæ™ºçš„åšæ³•ã€‚
å…³äºŽæ‚¨æåˆ°çš„éžç»“æž„åŒ–æ•°æ®å¤„ç†é—®é¢˜ï¼Œæˆ‘æ¥åˆ†æžä¸€ä¸‹ï¼š

æ•°æ®ç±»åž‹åˆ†æž
æ‚¨éœ€è¦å¤„ç†çš„æ•°æ®å¯ä»¥åˆ†ä¸ºå‡ ç±»ï¼š

ç»“æž„åŒ–æ•°æ®ï¼š

åŒºå—é“¾äº¤æ˜“æ•°æ®ï¼ˆå·²ç»åœ¨DuckDBä¸­ï¼‰
ä»£å¸ä»·æ ¼æ•°æ®ï¼ˆå¯ä»¥é€šè¿‡APIèŽ·å–ï¼‰
å¸‚å€¼ã€äº¤æ˜“é‡ç­‰é‡åŒ–æŒ‡æ ‡
åŠç»“æž„åŒ–æ•°æ®ï¼š

Xä¸Šçš„èˆ†è®ºæ•°æ®ï¼ˆJSONæ ¼å¼ä½†å†…å®¹å¤šæ ·ï¼‰
DeSciå›¢é˜Ÿå’ŒDAOç»„ç»‡ä¿¡æ¯ï¼ˆå¯èƒ½æ˜¯JSONæˆ–XMLæ ¼å¼ï¼‰
éžç»“æž„åŒ–æ•°æ®ï¼š

æ–°é—»æŠ¥é“æ–‡æœ¬
åšå®¢æ–‡ç« 
ç¤¾äº¤åª’ä½“è®¨è®ºå†…å®¹
è§†é¢‘/éŸ³é¢‘å†…å®¹ï¼ˆå¦‚æœ‰ï¼‰
è§£å†³æ–¹æ¡ˆ
1. æ··åˆå­˜å‚¨æž¶æž„
æ‚¨å¯ä»¥é‡‡ç”¨æ··åˆå­˜å‚¨æž¶æž„ï¼Œç»“åˆä½¿ç”¨ï¼š

DuckDBï¼šå¤„ç†ç»“æž„åŒ–æ•°æ®å’Œç®€å•çš„åŠç»“æž„åŒ–æ•°æ®
å‘é‡æ•°æ®åº“ï¼šå­˜å‚¨æ–‡æœ¬çš„å‘é‡è¡¨ç¤ºï¼Œç”¨äºŽè¯­ä¹‰æœç´¢
æ–‡ä»¶å­˜å‚¨ï¼šå­˜å‚¨åŽŸå§‹éžç»“æž„åŒ–æ•°æ®
2. æ•°æ®å¤„ç†æµç¨‹
åŽŸå§‹æ•°æ® â†’ é¢„å¤„ç† â†’ ç‰¹å¾æå– â†’ å­˜å‚¨ â†’ åˆ†æž/å±•ç¤º
é¢„å¤„ç†ï¼šæ¸…æ´—ã€æ ‡å‡†åŒ–
ç‰¹å¾æå–ï¼šä»Žéžç»“æž„åŒ–æ•°æ®ä¸­æå–å…³é”®ä¿¡æ¯
å­˜å‚¨ï¼šæ ¹æ®æ•°æ®ç±»åž‹é€‰æ‹©åˆé€‚çš„å­˜å‚¨æ–¹å¼
åˆ†æž/å±•ç¤ºï¼šæ•´åˆä¸åŒæ¥æºçš„æ•°æ®
3. å…·ä½“æŠ€æœ¯æ–¹æ¡ˆ
å¯¹äºŽä»£å¸ä»·æ ¼èµ°åŠ¿å›¾ï¼š
ä½¿ç”¨CoinGeckoã€CoinMarketCapç­‰APIèŽ·å–ç»“æž„åŒ–æ•°æ®
å­˜å…¥DuckDBæ—¶åºè¡¨
å‰ç«¯ä½¿ç”¨EChartsç­‰åº“å±•ç¤º
å¯¹äºŽXä¸Šçš„èˆ†è®ºå’Œæ–°é—»ï¼š
æ•°æ®èŽ·å–ï¼š

ä½¿ç”¨Twitter APIæˆ–ç½‘ç»œçˆ¬è™«
RSSè®¢é˜…æˆ–æ–°é—»API
æ–‡æœ¬å¤„ç†ï¼š

ä½¿ç”¨NLPæå–å…³é”®ä¿¡æ¯ï¼ˆæƒ…æ„Ÿã€ä¸»é¢˜ã€å®žä½“ï¼‰
å°†æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡è¡¨ç¤º
å­˜å‚¨æ–¹æ¡ˆï¼š

åŽŸå§‹æ–‡æœ¬ï¼šå¯ä»¥å­˜å‚¨åœ¨JSONå­—æ®µä¸­ï¼ˆDuckDBæ”¯æŒï¼‰
æå–çš„ç»“æž„åŒ–ä¿¡æ¯ï¼šå­˜å…¥DuckDBè¡¨
æ–‡æœ¬å‘é‡ï¼šä½¿ç”¨å‘é‡æ•°æ®åº“ï¼ˆå¦‚Chromaã€Milvusï¼‰æˆ–DuckDBçš„å‘é‡æ‰©å±•
å¯¹äºŽDeSciå›¢é˜Ÿå’ŒDAOä¿¡æ¯ï¼š
åˆ›å»ºä¸“é—¨çš„è¡¨ç»“æž„å­˜å‚¨åŸºæœ¬ä¿¡æ¯
ä½¿ç”¨JSONå­—æ®µå­˜å‚¨å¤æ‚æˆ–å˜åŒ–çš„å±žæ€§
å»ºç«‹å®žä½“å…³ç³»æ¨¡åž‹
4. æŠ€æœ¯æ ˆå»ºè®®
åŽç«¯ï¼š

DuckDBä½œä¸ºä¸»æ•°æ®ä»“åº“
ç®€å•çš„å‘é‡æ•°æ®åº“ï¼ˆå¦‚ChromaDBï¼‰
Node.jså¤„ç†æ•°æ®èŽ·å–å’Œè½¬æ¢
ä¸­é—´ä»¶ï¼š

ç®€å•çš„ETLæµç¨‹ï¼ˆå¯ä»¥ç”¨Node.jsè„šæœ¬å®žçŽ°ï¼‰
å®šæ—¶ä»»åŠ¡è°ƒåº¦ï¼ˆå¦‚node-cronï¼‰
å‰ç«¯ï¼š

æ•°æ®å¯è§†åŒ–åº“ï¼ˆEChartsã€D3.jsï¼‰
äº¤äº’å¼ä»ªè¡¨æ¿æ¡†æž¶ï¼ˆå¦‚React+MUIï¼‰
5. å®žæ–½è·¯å¾„
å…ˆå®ŒæˆåŒºå—é“¾äº¤æ˜“æ•°æ®çš„ä»“åº“å»ºè®¾
é€æ­¥æ·»åŠ ä»£å¸ä»·æ ¼ç­‰ç»“æž„åŒ–æ•°æ®
å®žéªŒæ€§åœ°æ·»åŠ ä¸€äº›éžç»“æž„åŒ–æ•°æ®å¤„ç†
æ ¹æ®å®žé™…éœ€æ±‚å’Œæ•ˆæžœè°ƒæ•´æž¶æž„
è¿™ç§æ¸è¿›å¼çš„æ–¹æ³•å¯ä»¥è®©æ‚¨åœ¨ç†è§£æ•°æ®çš„åŒæ—¶ï¼Œé€æ­¥æž„å»ºç³»ç»Ÿï¼Œé¿å…è¿‡æ—©çš„å¤æ‚åŒ–ã€‚

æ‚¨è®¤ä¸ºè¿™ä¸ªæ–¹å‘æ˜¯å¦ç¬¦åˆæ‚¨çš„éœ€æ±‚ï¼Ÿæˆ‘ä»¬å¯ä»¥å…ˆä¸“æ³¨äºŽå®ŒæˆåŒºå—é“¾æ•°æ®çš„èŽ·å–å’Œå­˜å‚¨ï¼Œç„¶åŽå†é€æ­¥æ‰©å±•åˆ°å…¶ä»–æ•°æ®æºã€‚

